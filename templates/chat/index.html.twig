{% extends 'base.html.twig' %}

{% block title %}
    Chat with {{ friend.username }}
{% endblock %}

{% block body %}
    <style>
        .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font:
        18px/1.5 sans-serif; } .example-wrapper code { background: #F5F5F5;
        padding: 2px 6px; }
    </style>

    <div class="example-wrapper">
        <h1>
            Chat with {{ friend.username }}
        </h1>
        {% if messages|length > 0 %}
        <div id="messages">
            {% for message in messages %}
                <div class="message">
                    <div class="message-header">
                        <span class="message-author">
                            {{ message.Sender.username }}
                        </span>
                        <span class="message-date">
                            {{ message.creationDate|date('d/m/Y H:i') }}
                        </span>
                    </div>
                    <div class="message-content">
                        {{ message.text }}
                    </div>
                </div>
            {% endfor %}
            {% else %}
                <div class="message">
                    <div class="message-content">
                        No messages yet
                    </div>
                </div>
            {% endif %}
        </div>
        <div>
        {{
            form_start(
                form,
                {
                    action: path('app_chat_send_post',{id: friend.id}),
                    method: 'POST'
                }
            )
        }}
        {{ form_widget(form) }}
        {% if form.vars.errors|length > 0 %}
            <div class="form-error">
                {{ form.vars.errors }}
            </div>
        {% endif %}
        {{ form_end(form) }}
    </div>
    </div>
{% endblock %}
